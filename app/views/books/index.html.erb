<%= render 'layouts/top_panel' %>
<p id="notice"><%= notice %></p>

<nav>
<h1>Books</h1>



<table class="table table-condensed table-bordered">
  <thead>
    <tr class="success">
      <th><%=link_to 'Title', books_path(sort:'title') %></th>
      <th><%=link_to 'Author', books_path(sort:'author') %></th>
      <th><%=link_to 'Price', books_path(sort:'price') %></th>
      <th><%=link_to 'Page count', books_path(sort:'page_count') %></th>
      <th><%=link_to 'About', books_path(sort:'about') %></th>
      <th><%=link_to 'Owner', books_path(sort:'owner') %></th>
      <th><%=link_to 'Date of realize', books_path(sort:'date_of_realize') %></th>
      <th><%=link_to 'Binding', books_path(sort:'binding') %></th>
      <th><%=link_to 'Genre', books_path(sort:'genre') %></th>
      <th colspan="3">
        <div class="field">
          <%= form_tag("/search", method: "get") do %>
              <%= label_tag(:book_author, "Search auhor:") %>
              <%= text_field_tag(:book_author) %>
              <%= submit_tag 'find'%>
          <% end %>
        </div>
      </th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @books.each do |book| %>
      <tr>
        <td class="col-md-1 active"><%= book.title %></td>
        <td class="col-md-1"><%= book.author %></td>
        <td class="col-md-1"><%= book.price %></td>
        <td class="col-md-1"><%= book.page_count %></td>
        <td class="col-md-1"><%= book.about %></td>
        <td class="col-md-1 info"><%= link_to book.owner, book.user %></td>
        <td class="col-md-1"><%= book.date_of_realize %></td>
        <td class="col-md-1"><%= book.binding %></td>
        <td class="col-md-1"><%= book.genre %></td>
        <td class="col-md-1 warning"><%= link_to 'Show', book %></td>
          <% if admin? current_user %>
            <td class="col-md-1"><%= link_to 'Edit', edit_book_path(book) %></td>
            <td class="col-md-1 danger"><%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
          <% end %>
        <td><%= image_tag book.images.first.image.url, size: '150x100'  if book.images.first.present?   %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
</nav>
<%= paginate @books %>


<%= link_to 'New Book', new_book_path %>
